.modal-overlay{z-index:1000;padding:var(--spacing-md);background:#00000080;justify-content:center;align-items:center;display:flex;position:fixed;inset:0}.modal-content{background:var(--tg-bg-color);border-radius:var(--border-radius);width:100%;max-width:400px;max-height:80vh;animation:.3s ease-out modalAppear;overflow:hidden;box-shadow:0 10px 30px #0000004d}@keyframes modalAppear{0%{opacity:0;transform:scale(.9)translateY(20px)}to{opacity:1;transform:scale(1)translateY(0)}}.modal-header{padding:var(--spacing-lg);border-bottom:1px solid #00000014;justify-content:space-between;align-items:center;display:flex}.modal-header h3{margin:0;font-size:18px;font-weight:600}.modal-close{cursor:pointer;width:32px;height:32px;color:var(--tg-text-color);background:0 0;border:none;border-radius:50%;justify-content:center;align-items:center;font-size:24px;transition:background .2s;display:flex}.modal-close:hover{background:#0000000d}.modal-body{padding:var(--spacing-lg);max-height:60vh;overflow-y:auto}.ai-chat{background:var(--tg-theme-bg-color,#fff);border-radius:12px;flex-direction:column;height:70vh;display:flex;overflow:hidden}.ai-chat-header{background:var(--tg-theme-secondary-bg-color,#f8f8f8);border-bottom:1px solid var(--tg-theme-section-separator-color,#e5e5e5);align-items:center;padding:16px 20px;display:flex;position:relative}.ai-avatar{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:50%;justify-content:center;align-items:center;width:40px;height:40px;margin-right:12px;font-size:18px;display:flex}.ai-info{flex:1}.ai-info h3{color:var(--tg-theme-text-color,#000);margin:0 0 4px;font-size:16px;font-weight:600}.ai-info p{color:var(--tg-theme-hint-color,#666);margin:0;font-size:12px}.ai-close-btn{color:var(--tg-theme-hint-color,#666);cursor:pointer;background:0 0;border:none;border-radius:4px;padding:4px;font-size:24px}.ai-close-btn:hover{background:var(--tg-theme-section-separator-color,#e5e5e5)}.ai-chat-messages{flex-direction:column;flex:1;gap:12px;padding:16px;display:flex;overflow-y:auto}.message{flex-direction:column;max-width:85%;display:flex}.user-message{align-self:flex-end;align-items:flex-end}.ai-message{align-self:flex-start;align-items:flex-start}.message-content{word-wrap:break-word;border-radius:18px;padding:12px 16px;font-size:14px;line-height:1.4}.user-message .message-content{background:var(--tg-theme-button-color,#2481cc);color:var(--tg-theme-button-text-color,#fff);border-bottom-right-radius:4px}.ai-message .message-content{background:var(--tg-theme-secondary-bg-color,#f8f8f8);color:var(--tg-theme-text-color,#000);border-bottom-left-radius:4px}.message-time{color:var(--tg-theme-hint-color,#999);margin-top:4px;padding:0 4px;font-size:11px}.typing-indicator{align-items:center;gap:4px;display:flex}.typing-indicator span{background:var(--tg-theme-hint-color,#999);border-radius:50%;width:6px;height:6px;animation:1.4s ease-in-out infinite typing}.typing-indicator span:first-child{animation-delay:-.32s}.typing-indicator span:nth-child(2){animation-delay:-.16s}@keyframes typing{0%,80%,to{opacity:.5;transform:scale(.8)}40%{opacity:1;transform:scale(1)}}.ai-suggestions{border-top:1px solid var(--tg-theme-section-separator-color,#e5e5e5);background:var(--tg-theme-secondary-bg-color,#f8f8f8);padding:12px 16px}.suggestions-title{color:var(--tg-theme-hint-color,#666);margin-bottom:8px;font-size:12px;font-weight:500}.suggestions-grid{flex-direction:column;gap:6px;display:flex}.suggestion-chip{background:var(--tg-theme-bg-color,#fff);border:1px solid var(--tg-theme-section-separator-color,#e5e5e5);color:var(--tg-theme-text-color,#000);cursor:pointer;text-align:left;border-radius:16px;padding:8px 12px;font-size:12px;transition:all .2s}.suggestion-chip:hover{border-color:var(--tg-theme-button-color,#2481cc);background:var(--tg-theme-secondary-bg-color,#f8f8f8)}.suggestion-chip:disabled{opacity:.6;cursor:not-allowed}.ai-chat-input{border-top:1px solid var(--tg-theme-section-separator-color,#e5e5e5);background:var(--tg-theme-bg-color,#fff);padding:16px}.input-container{align-items:center;gap:8px;display:flex}.input-container input{border:1px solid var(--tg-theme-section-separator-color,#e5e5e5);background:var(--tg-theme-secondary-bg-color,#f8f8f8);color:var(--tg-theme-text-color,#000);border-radius:24px;outline:none;flex:1;padding:12px 16px;font-size:14px}.input-container input:focus{border-color:var(--tg-theme-button-color,#2481cc)}.input-container input:disabled{opacity:.6}.send-button{background:var(--tg-theme-button-color,#2481cc);width:40px;height:40px;color:var(--tg-theme-button-text-color,#fff);cursor:pointer;border:none;border-radius:50%;justify-content:center;align-items:center;transition:opacity .2s;display:flex}.send-button:disabled{opacity:.5;cursor:not-allowed}.send-button:not(:disabled):hover{opacity:.9}.ai-chat-messages::-webkit-scrollbar{width:4px}.ai-chat-messages::-webkit-scrollbar-track{background:0 0}.ai-chat-messages::-webkit-scrollbar-thumb{background:var(--tg-theme-section-separator-color,#e5e5e5);border-radius:2px}.ai-chat-messages::-webkit-scrollbar-thumb:hover{background:var(--tg-theme-hint-color,#999)}.ai-loading-model{justify-content:center;align-items:center;height:200px;padding:20px;display:flex}.loading-progress{text-align:center;width:100%}.progress-bar{background:var(--tg-theme-secondary-bg-color,#f0f0f0);border-radius:4px;width:100%;height:8px;margin-bottom:12px;overflow:hidden}.progress-fill{background:linear-gradient(90deg,#667eea,#764ba2);border-radius:4px;height:100%;transition:width .3s}.progress-text{color:var(--tg-theme-text-color,#000);margin-bottom:16px;font-size:14px;font-weight:500}.loading-details{text-align:left;background:var(--tg-theme-secondary-bg-color,#f8f8f8);color:var(--tg-theme-hint-color,#666);border-radius:8px;padding:12px;font-size:12px}.loading-details p{margin:4px 0}.ai-model-warning{background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;align-items:center;gap:12px;margin:12px;padding:12px;display:flex}.warning-icon{flex-shrink:0;font-size:20px}.warning-text{flex:1}.warning-text strong{color:#856404;margin-bottom:4px;display:block}.warning-text p{color:#856404;margin:0;font-size:12px}.post{background:var(--tg-theme-secondary-bg-color,#fff);cursor:pointer;border:1px solid #0000000d;border-radius:12px;margin-bottom:16px;transition:transform .2s cubic-bezier(.4,0,.2,1),box-shadow .2s;overflow:hidden;box-shadow:0 2px 8px #0000000d}.post:active{transform:scale(.98)}.post-header{border-bottom:1px solid var(--tg-theme-hint-color,#0000000d);justify-content:space-between;align-items:center;padding:12px 16px;display:flex}.channel-info{align-items:center;gap:10px;display:flex}.channel-avatar{background:linear-gradient(135deg,var(--tg-button-color,#007aff),#5ac8fa);color:#fff;border-radius:50%;justify-content:center;align-items:center;width:36px;height:36px;font-size:15px;font-weight:700;display:flex;box-shadow:0 2px 4px #007aff33}.channel-name{color:var(--tg-theme-text-color,#000);font-size:14px;font-weight:600}.post-meta{color:var(--tg-theme-hint-color,#999);margin-top:2px;font-size:11px}.post-content{padding:14px 16px}.post-image{aspect-ratio:16/9;background:var(--tg-theme-bg-color,#f0f0f0);border-radius:10px;width:100%;margin-bottom:12px;overflow:hidden}.post-image img{object-fit:cover;width:100%;height:100%;transition:opacity .3s;display:block}.post-title{color:var(--tg-theme-text-color,#000);margin-bottom:6px;font-size:17px;font-weight:700;line-height:1.25}.post-text{color:var(--tg-theme-text-color,#000);-webkit-line-clamp:3;-webkit-box-orient:vertical;font-size:14.5px;line-height:1.45;display:-webkit-box;overflow:hidden}.post-actions{justify-content:space-between;gap:6px;padding:6px 12px 10px;display:flex}.action-btn{color:var(--tg-theme-hint-color,#8e8e93);cursor:pointer;background:0 0;border:none;border-radius:10px;flex:1;justify-content:center;align-items:center;min-height:42px;padding:8px;font-size:18px;transition:all .2s cubic-bezier(.4,0,.2,1);display:flex}.action-count{font-variant-numeric:tabular-nums;margin-left:5px;font-size:12px;font-weight:600}.action-btn:hover{background:#0000000a}.action-btn:active{transform:scale(.9)}.action-btn[style*=color]{background:#00000008;animation:.3s cubic-bezier(.175,.885,.32,1.275) pop}@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.action-btn:disabled{opacity:.7}.action-btn[disabled] span{animation:1s linear infinite spin}.action-btn:contains("ðŸ”„"){animation:1s linear infinite spin}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.action-btn.subscribe-btn{color:var(--tg-theme-button-color,#007aff);font-weight:700}@media (max-width:480px){.post{border-left:none;border-right:none;border-radius:0;margin-bottom:8px}.post-title{font-size:16px}.action-btn{font-size:17px}}.search-bar{background:var(--tg-bg-color);margin-bottom:var(--spacing-md);border:1px solid #0000001a;border-radius:20px;align-items:center;padding:8px 16px;display:flex;position:relative;box-shadow:0 1px 3px #0000001a}.search-icon{color:var(--tg-hint-color);margin-right:8px;font-size:16px}.search-input{color:var(--tg-text-color);background:0 0;border:none;outline:none;flex:1;padding:4px 0;font-size:16px}.search-input::placeholder{color:var(--tg-hint-color)}.clear-button{color:var(--tg-hint-color);cursor:pointer;background:0 0;border:none;border-radius:50%;padding:4px;font-size:16px;transition:background-color .2s}.clear-button:hover{background:#0000000d}.bottom-menu{height:var(--bottom-menu-height);z-index:1000;-webkit-backdrop-filter:blur(20px);border-top:1px solid var(--tg-border-color);background:#ffffffb3;justify-content:space-around;align-items:center;padding:0 4px;display:flex;position:fixed;bottom:0;left:0;right:0}[data-theme=dark] .bottom-menu{background:#1e1e1eb3}.menu-item{opacity:.7;cursor:pointer;min-width:60px;color:var(--tg-text-color);background:0 0;border:none;border-radius:12px;flex-direction:column;justify-content:center;align-items:center;padding:6px 8px;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex}.menu-item:hover{opacity:.9}.menu-item.active{opacity:1;background:var(--tg-button-color);color:var(--tg-button-text-color);transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.menu-item-ai{color:#fff;opacity:.9;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);position:relative;overflow:hidden}.menu-item-ai.active{opacity:1;background:linear-gradient(135deg,#764ba2 0%,#667eea 100%);box-shadow:0 6px 20px #667eea66}.settings-modal{padding:8px 0}.settings-tabs{border-bottom:1px solid #0000001a;margin-bottom:16px;display:flex}.settings-tab{cursor:pointer;color:var(--tg-text-color);background:0 0;border:none;border-bottom:2px solid #0000;flex:1;padding:12px 16px;font-size:14px;font-weight:500;transition:all .2s}.settings-tab.active{border-bottom-color:var(--tg-button-color);color:var(--tg-button-color)}.settings-tab:hover{background:#0000000d}.settings-content{min-height:300px}.channels-settings{flex-direction:column;gap:16px;display:flex}.settings-section h3{color:var(--tg-text-color);margin:0 0 8px;font-size:16px}.empty-channels{text-align:center;color:var(--tg-hint-color);padding:40px 20px}.empty-icon{opacity:.5;margin-bottom:12px;font-size:48px}.empty-hint{color:var(--tg-hint-color);margin-top:8px;font-size:13px}.channels-list{flex-direction:column;gap:8px;max-height:300px;display:flex;overflow-y:auto}.channel-item{background:var(--tg-bg-color);border:1px solid #0000001a;border-radius:8px;justify-content:space-between;align-items:center;padding:12px;transition:background-color .2s;display:flex}.channel-item:hover{background:#00000008}.channel-info{flex:1;align-items:center;gap:12px;display:flex}.channel-avatar{background:var(--tg-button-color);color:#fff;border-radius:50%;justify-content:center;align-items:center;width:32px;height:32px;font-size:14px;display:flex}.channel-details{flex:1}.channel-name{color:var(--tg-text-color);margin-bottom:2px;font-size:14px;font-weight:500}.channel-username{color:var(--tg-hint-color);font-size:12px}.channel-stats{color:var(--tg-hint-color);margin-top:2px;font-size:11px}.remove-btn{color:var(--tg-hint-color);cursor:pointer;background:0 0;border:none;border-radius:4px;justify-content:center;align-items:center;width:32px;height:32px;padding:4px 8px;font-size:20px;transition:all .2s;display:flex}.remove-btn:hover{color:#f44;background:#ff44441a}.remove-btn.removing{opacity:.5;cursor:not-allowed}.add-channel-btn{background:var(--tg-button-color);color:var(--tg-button-text-color);cursor:pointer;text-align:center;border:none;border-radius:8px;padding:12px 16px;font-size:14px;font-weight:500;transition:opacity .2s}.add-channel-btn:hover{opacity:.9}.topics-settings{flex-direction:column;gap:16px;height:100%;display:flex}.settings-description{color:var(--tg-hint-color);margin:0 0 16px;font-size:14px}.topics-grid{grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px;display:grid}.topic-item{background:var(--tg-bg-color);cursor:pointer;color:var(--tg-text-color);border:1px solid #0000001a;border-radius:8px;align-items:center;gap:8px;padding:12px;font-size:14px;transition:all .2s;display:flex}.topic-item:hover{background:#00000008}.topic-item.selected{border-color:var(--tg-button-color);background:#2581cc1a}.topic-emoji{font-size:16px}.topic-name{font-weight:500}.topics-header{margin-bottom:20px}.topics-quick-actions{gap:10px;margin:15px 0;display:flex}.quick-action-btn{border:1px solid var(--tg-button-color);color:var(--tg-button-color);cursor:pointer;background:0 0;border-radius:6px;padding:6px 12px;font-size:12px;transition:all .2s}.quick-action-btn:hover{background:var(--tg-button-color);color:var(--tg-button-text-color)}.topics-footer{border-top:1px solid #0000001a;margin-top:auto;padding-top:16px}.selected-count{text-align:center;color:var(--tg-hint-color);margin-bottom:12px;font-size:14px}.changes-indicator{color:#ff6b00;font-weight:500}.topics-actions{gap:10px;display:flex}.topics-actions .secondary-button,.topics-actions .primary-button{flex:1;padding:10px 16px;font-size:14px}.primary-button{background:var(--tg-button-color);color:var(--tg-button-text-color);cursor:pointer;border:none;border-radius:8px;padding:12px 16px;font-size:14px;font-weight:500;transition:opacity .2s}.secondary-button{color:var(--tg-button-color);border:1px solid var(--tg-button-color);cursor:pointer;background:0 0;border-radius:8px;padding:12px 16px;font-size:14px;font-weight:500;transition:all .2s}.channels-header{justify-content:space-between;align-items:center;margin-bottom:15px;display:flex}.debug-button{color:#ff6b00;cursor:pointer;opacity:.6;background:0 0;border:1px solid #ff6b00;border-radius:4px;padding:4px 8px;font-size:12px}.debug-button:hover{opacity:1}.debug-info{text-align:center;color:var(--tg-hint-color);background:#00000008;border-radius:4px;margin-top:10px;padding:8px;font-size:11px}.loading-topics{color:var(--tg-hint-color);flex-direction:column;justify-content:center;align-items:center;padding:60px 20px;display:flex}.loading-topics .spinner{margin-bottom:12px}.theme-toggle{cursor:pointer;-webkit-tap-highlight-color:transparent;background:0 0;border:none;align-items:center;width:50px;height:28px;padding:0;display:flex}.toggle-track{background:var(--tg-theme-hint-color,#e5e7eb);opacity:.8;border-radius:14px;width:100%;height:100%;transition:background-color .3s,opacity .3s;position:relative}[data-theme=dark] .toggle-track{opacity:1;background:#334155}.toggle-thumb{background:#fff;border-radius:50%;justify-content:center;align-items:center;width:22px;height:22px;font-size:13px;transition:transform .3s cubic-bezier(.34,1.56,.64,1),background-color .3s;display:flex;position:absolute;top:3px;left:3px;box-shadow:0 2px 5px #0003}.theme-toggle.is-dark .toggle-thumb{background:#1e293b;transform:translate(22px)}.theme-toggle.is-light .toggle-thumb{color:#f59e0b}.theme-toggle.is-dark .toggle-thumb{color:#facc15}.theme-toggle:active .toggle-thumb{border-radius:12px;width:26px}:root{--tg-bg-color:#fff;--tg-text-color:#000;--tg-hint-color:#999;--tg-button-color:#2481cc;--tg-button-text-color:#fff;--tg-border-color:#0000001a;--tg-card-bg:#fff}[data-theme=dark]{--tg-bg-color:#1a1a1a;--tg-text-color:#fff;--tg-hint-color:#888;--tg-button-color:#2b8ce6;--tg-button-text-color:#fff;--tg-border-color:#ffffff1a;--tg-card-bg:#2d2d2d}*{box-sizing:border-box;margin:0;padding:0}body{background:var(--tg-bg-color);color:var(--tg-text-color);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;line-height:1.5;transition:all .3s;overflow:hidden}.app{height:100vh;padding:var(--spacing-sm);background:var(--tg-bg-color);flex-direction:column;max-width:100%;padding-bottom:70px;display:flex;overflow:hidden}:root{--border-radius:12px;--spacing-xs:4px;--spacing-sm:8px;--spacing-md:16px;--spacing-lg:24px}.app-header{margin-bottom:var(--spacing-sm);flex-shrink:0}.header-top{margin-bottom:var(--spacing-sm);justify-content:space-between;align-items:center;display:flex}.app-title{color:var(--tg-text-color);font-size:18px;font-weight:600}.header-actions{gap:var(--spacing-xs);display:flex}.mode-button{border:1px solid var(--tg-button-color);color:var(--tg-button-color);cursor:pointer;background:0 0;border-radius:16px;padding:6px 12px;font-size:12px;transition:all .2s}.mode-button.active{background:var(--tg-button-color);color:var(--tg-button-text-color)}.mode-button:hover{opacity:.9}.feed{-webkit-overflow-scrolling:touch;flex:1;max-height:calc(100vh - 140px);overflow:hidden auto}.loading-state,.error-state,.empty-state{padding:var(--spacing-xl);text-align:center;flex-direction:column;justify-content:center;align-items:center;display:flex}.spinner{border:4px solid var(--tg-hint-color);border-left:4px solid var(--tg-button-color);width:40px;height:40px;margin-bottom:var(--spacing-md);border-radius:50%;animation:1s linear infinite spin}.spinner.small{width:24px;height:24px;margin-bottom:var(--spacing-sm);border-width:2px}.error-icon{margin-bottom:var(--spacing-md);opacity:.7;font-size:48px}.retry-button,.add-channel-button{background:var(--tg-button-color);color:var(--tg-button-text-color);border-radius:var(--border-radius);padding:var(--spacing-md)var(--spacing-lg);cursor:pointer;margin-top:var(--spacing-md);border:none;font-size:16px;transition:opacity .2s}.retry-button:hover,.add-channel-button:hover{opacity:.9}.loading-more,.end-of-feed{text-align:center;padding:var(--spacing-lg);color:var(--tg-hint-color)}.empty-icon{margin-bottom:var(--spacing-md);opacity:.5;font-size:48px}.add-channel-modal{text-align:center}.channel-input{width:100%;padding:var(--spacing-md);border:1px solid var(--tg-border-color);border-radius:var(--border-radius);margin:var(--spacing-md)0;background:var(--tg-card-bg);color:var(--tg-text-color);font-size:16px}.channel-input::placeholder{color:var(--tg-hint-color)}.modal-buttons{gap:var(--spacing-sm);margin-top:var(--spacing-md);display:flex}.primary-button{background:var(--tg-button-color);color:var(--tg-button-text-color);border-radius:var(--border-radius);padding:var(--spacing-md)var(--spacing-lg);cursor:pointer;border:none;flex:1;font-size:16px;transition:opacity .2s}.primary-button:hover:not(:disabled){opacity:.9}.primary-button:disabled{opacity:.5;cursor:not-allowed}.secondary-button{color:var(--tg-button-color);border:1px solid var(--tg-button-color);border-radius:var(--border-radius);padding:var(--spacing-md)var(--spacing-lg);cursor:pointer;background:0 0;flex:1;font-size:16px;transition:all .2s}.secondary-button:hover:not(:disabled){background:var(--tg-button-color);color:var(--tg-button-text-color)}.secondary-button:disabled{opacity:.5;cursor:not-allowed}.post-modal-content{padding:var(--spacing-sm)}.modal-post-header{align-items:center;gap:var(--spacing-md);margin-bottom:var(--spacing-lg);display:flex}.channel-avatar.large{width:50px;height:50px;font-size:20px}.modal-channel-info{flex:1}.modal-post-title{margin-bottom:var(--spacing-md);color:var(--tg-text-color);font-size:18px;font-weight:600;line-height:1.4}.modal-post-text{color:var(--tg-text-color);margin-bottom:var(--spacing-lg);opacity:.9;font-size:15px;line-height:1.6}.modal-post-image{border-radius:var(--border-radius);margin-bottom:var(--spacing-lg);overflow:hidden}.modal-post-image img{object-fit:cover;width:100%;max-height:300px}.image-placeholder{opacity:.5;background:#0000000d;border-radius:8px;justify-content:center;align-items:center;width:100%;height:200px;margin-top:8px;font-size:48px;display:flex}[data-theme=dark] .image-placeholder{background:#ffffff0d}@media (max-width:480px){.app{padding:8px 8px 60px}.app-title{font-size:16px}.mode-button{padding:4px 8px;font-size:11px}.feed{max-height:calc(100vh - 120px)}}.debug-panel{color:#6c757d;background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;max-height:120px;margin:10px;padding:12px;font-size:12px;overflow-y:auto}.debug-toggle{color:#fff;cursor:pointer;background:#6c757d;border:none;border-radius:50%;width:30px;height:30px;font-size:14px}:root{--lightningcss-light:initial;--lightningcss-dark: ;color-scheme:light dark;color:#ffffffde;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#242424;font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5}@media (prefers-color-scheme:dark){:root{--lightningcss-light: ;--lightningcss-dark:initial}}a{color:#646cff;-webkit-text-decoration:inherit;text-decoration:inherit;font-weight:500}a:hover{color:#535bf2}body{place-items:center;min-width:320px;min-height:100vh;margin:0;display:flex}h1{font-size:3.2em;line-height:1.1}button{cursor:pointer;background-color:#1a1a1a;border:1px solid #0000;border-radius:8px;padding:.6em 1.2em;font-family:inherit;font-size:1em;font-weight:500;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media (prefers-color-scheme:light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}
